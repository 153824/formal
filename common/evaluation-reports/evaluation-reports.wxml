<view class="program-wrapper {{!type ==='report-more' ? 'more-report-wrapper' : ''}}">
<!--    <van-search-->
<!--            wx:if="{{search}}"-->
<!--            value="{{keyword}}"-->
<!--            input-align="center"-->
<!--            placeholder="按姓名搜索"-->
<!--            custom-class="van-search-custom"-->
<!--            field-class="van-search-field-custom"-->
<!--            bind:change="searchReport"-->
<!--            bind:focus="clearContent"-->
<!--            bind:blur="getReportListAgain"-->
<!--            use-right-icon-slot-->
<!--            left-icon=""-->
<!--            right-icon=""-->
<!--            maxlength="8"-->
<!--            custom-class="van-search-custom"-->
<!--            input-class="van-search-custom-input"-->
<!--            field-class="van-search-custom-field"/>-->
    <view class="search-report__wrapper">
        <view class="seacr-report__input search-report__by-name">
            <input bind:input="searchReport" value="{{keyword}}" placeholder="搜索姓名"/>
        </view>
        <view class="seacr-report__input search-report__by-evaluation" style="{{isShowEvaluationSelect ? 'flex: unset;width: 60%;' : ''}}">
            <input value="{{selectEvaluation.name}}" placeholder="搜索测评" bind:tap="onEvaluationTap" style="{{isShowEvaluationSelect ? 'text-align: left;width: 95%;' : ''}}"/>
            <van-icon name="{{isShowEvaluationSelect ? 'arrow-up' : 'arrow-down'}}"/>
            <van-overlay catch:click="hideSelect" show="{{ isShowEvaluationSelect }}" lock-scroll="{{false}}" custom-style="background-color: #00000000;">
                <scroll-view scroll-y="{{true}}" class="search-by-evaluation-result__wrapper">
                    <block wx:for="{{evaluationGroup}}" wx:for-item="evaluationItem" wx:for-index="evaluationIndex" wx:key="unique">
                        <view class="evaluation-item {{selectEvaluation.id === evaluationItem.id ? 'is-selected' : ''}}" bind:tap="selectEvaluation" data-item="{{evaluationItem}}">{{evaluationItem.name}}</view>
                    </block>
                </scroll-view>
            </van-overlay>
        </view>
    </view>
    <scroll-view wx:if="{{!keyword && !selectEvaluation.id}}" class="report-content-wrapper" scroll-y bindscrolltolower="nextPage"
                 style="height: {{windowHeight * pixelRate - 50 - 148}}rpx;">
        <view bindtap="goToReport"
              wx:for="{{reportList}}"
              wx:for-item="reportItem"
              wx:key="unique" data-receive-record-id="{{reportItem.receiveRecordId}}"
              wx:for-index="reportIndex"
              data-index="{{reportIndex}}"
              class="program-body the-last-report {{reportIndex === 0 ? 'no-margin-top' : '' }}">
            <view class="report-created-time">
                <text>{{util.getMonthAndDayByFrag(reportItem.reportGeneratedAt,"/",true)}}</text>
                <text>{{util.getHourAndMinByFrag(reportItem.reportGeneratedAt,":",true)}}</text>
            </view>
            <view class="evaluation-wrapper">
                <view class="evaluation-name user-info-wrapper">
                    <view class="user-info">
                        <text>{{reportItem.participant}}</text>
                        <text wx:if="{{ reportItem.showSummary }}" class="recommend-grade">{{ reportItem.summary }}</text><text wx:if="{{ reportItem.showGrade }}" class="recommend-grade recommend-score">{{reportItem.grade}}分</text>
                    </view>
                </view>
                <view class="user-answer-evaluation">
                    {{reportItem.evaluation}}
                </view>
            </view>
            <view class="send-evaluation">
                <image src="https://ihola.luoke101.com/work-base%40icon-arrow.png"
                       style="width: 32rpx;height: 32rpx;"></image>
            </view>
            <view wx:if="{{ util.isSameDays(reportItem.reportGeneratedAt) && reportItem.unread }}"
                  class="new-adding-mark">
                <text>新</text>
            </view>
        </view>
        <hola-empty isShow="{{!reportList.length}}" title="暂无测评报告"></hola-empty>
    </scroll-view>
    <scroll-view wx:else class="report-content-wrapper" scroll-y bindscrolltolower="searchNextPage"
                 data-keyword="{{keyword}}" style="height: {{windowHeight * pixelRate - 50 - 148}}rpx;">
        <view class="program-body the-last-report {{reportIndex === 0 ? 'no-margin-top' : '' }}" bindtap="goToReport"
              wx:for="{{ searchReportList }}"
              wx:for-item="reportItem"
              wx:key="unique" data-receive-record-id="{{reportItem.receiveRecordId}}"
              wx:for-index="reportIndex"
              data-index="{{reportIndex}}">
            <view class="report-created-time">
                <text>{{util.getMonthAndDayByFrag(reportItem.reportGeneratedAt,"/",true)}}</text>
                <text>{{util.getHourAndMinByFrag(reportItem.reportGeneratedAt,":",true)}}</text>
            </view>
            <view class="evaluation-wrapper">
                <view class="evaluation-name user-info-wrapper">
                    <view class="user-info">
                        <text>{{reportItem.participant}}</text>
                        <text wx:if="{{ reportItem.showSummary }}" class="recommend-grade">{{ reportItem.summary }}</text><text wx:if="{{ reportItem.showGrade }}" class="recommend-grade recommend-score">{{reportItem.grade}}分</text>
                    </view>
                </view>
                <view class="user-answer-evaluation">
                    {{reportItem.evaluation}}
                </view>
            </view>
            <view class="send-evaluation">
                <image src="https://ihola.luoke101.com/work-base%40icon-arrow.png"
                       style="width: 32rpx;height: 32rpx;"></image>
            </view>
            <view wx:if="{{ util.isSameDays(reportItem.reportGeneratedAt) && reportItem.unread }}"
                  class="new-adding-mark">
                <text>新</text>
            </view>
        </view>
        <hola-empty isShow="{{!searchReportList.length}}" title="暂无测评报告"></hola-empty>
    </scroll-view>
</view>
<wxs src="../../utils/util.wxs" module="util"></wxs>
