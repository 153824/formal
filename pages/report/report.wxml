<!--admins/report.wxml-->
<block>
    <view>
        <!-- 头部信息 -->
        <view class="box0" style='padding: 36rpx  60rpx 48rpx 60rpx;background: #fff;'>
            <view class="paperName">
                <text class="underLineBg">{{shareInfo.evaluationName}}</text>
            </view>
            <!-- <view class="mind">
            <text>LINWEI等5人已读</text>
          </view> -->
            <view class="time">
                <text>报告生成时间：{{reportGeneratedAt}}</text>
            </view>
        </view>
        <view class="spaceView" style="height:40rpx;"></view>
        <!-- 用户信息 -->
        <view class="box">
            <view class="title">
                <text class="underLineBg assessor-info ">测评者信息</text>
            </view>
            <view class="people flex">
                <image src="{{participant.avatar||'./images/report@icon-avatar.png'}}" class="avatar"></image>
                <view class="flex-main">
                    <view class="name">{{participant.username || participant.nickname || "好啦访客"}}</view>
                    <view class="otherMsg">
                        <text>年龄：{{participant.age || "—"}}</text>
                        <text>学历：{{participant.degree || "—"}}</text>
                    </view>
                </view>
            </view>
            <view class="title" style="margin-top:100rpx;" wx:if="{{respondAnalysis.display}}">
                <text class="underLineBg assessor-info">{{respondAnalysis.title}}</text>
            </view>
            <view class="list flex" wx:if="{{respondAnalysis.display}}">
                <view class="item flex-main" wx:if="{{respondAnalysis.duration.display}}" bindtap="showDlg"
                      data-n="{{respondAnalysis.duration.valid?'':'timeDlg'}}">
                    <view class="topView {{respondAnalysis.duration.valid?'':'topView1'}}"></view>
                    <view class="name">作答时长</view>
                    <view class="msg" wx:if="{{respondAnalysis.duration.valid}}">{{respondAnalysis.timeTotal}}分钟（正常）</view>
                    <view class="msg msg1" wx:else>{{respondAnalysis.discordant.verdict=="OVERLONG"?'过长':"过短"}}</view>
                    <image src="./images/report@icon-{{respondAnalysis.duration.valid?'success':'thinking'}}.png"></image>
                </view>
                <view class="item flex-main" wx:if="{{respondAnalysis.discordant.display}}" bindtap="showDlg"
                      data-n="{{respondAnalysis.discordant.valid?'':'noMatchDlg'}}">
                    <view class="topView {{respondAnalysis.discordant.valid?'':'topView1'}}"></view>
                    <view class="name">作答一致性</view>
                    <view class="msg" wx:if="{{respondAnalysis.discordant.valid}}">正常</view>
                    <view class="msg msg1" wx:else>异常</view>
                    <image src="./images/report@icon-{{respondAnalysis.discordant.valid?'success':'thinking'}}.png"></image>
                </view>
            </view>
            <view class="content" wx:if="{{respondAnalysis.syllabus.display}}">{{respondAnalysis.syllabus.annotation}}
            </view>
            <view class="title" style="margin-top:80rpx;" wx:if="{{ usageManual.display }}">
                <text class="underLineBg assessor-info">{{usageManual.headline}}</text>
            </view>
            <view class="list flex" wx:if="{{ usageManual.display }}"
                  style="padding-right: 54rpx;padding-left: 24rpx;">
                <rich-text nodes="<p>{{usageManual.description||''}}</p>"></rich-text>
            </view>
        </view>
        <!-- 报告总述 -->
        <view class="box1" wx:if="{{summary.display}}">
            <view class="title report-summary">
                <text>{{summary.title}}</text>
            </view>
            <view wx:if="{{coordinate.display}}" class="chartImg" style="display: flex;justify-content: center;align-items: center;margin-top: 40rpx;">
                <hola-grid axis="{{coordinate.graphAxis}}" area="{{coordinate.graphQuadrants}}" coordinate="{{coordinate.graphCoordinateIdx}}" type="nineCell">

                </hola-grid>
            </view>
            <view class="flex temple"
                  wx:if="{{summary.display}}">
                <view class="flex-main item noramlTem"
                      style="padding:56rpx 0;{{!report.summaryRankOrg&&!report.summaryRankAll?'':'margin-right:20rpx;'}}{{(!report.summaryRankOrg||!report.summaryRankAll)&&!report.showSummaryTotal?'height:230rpx;':''}}"
                      wx:if="{{summary.display}}">
                    <view style="width: 100%;">
                        <view class="name">{{summary.levelTitle}}
                        </view>
                        <view class="lvName">{{summary.levelConclusion}}</view>
                    </view>
                </view>
            </view>
            <view class="content" wx:if="{{summary.display}}">
                <rich-text nodes="{{summary.annotation}}"></rich-text>
            </view>
        </view>
        <!-- 维度分析 -->
        <view class="box3" wx:if="{{showDimension}}">
            <block wx:for="{{dimensions}}" wx:key="unique">
                <block wx:if="{{item.display}}">
                    <view class="spaceView" wx:if="{{index==1}}" style="height:20rpx;"></view>
                    <view class="title">
                        <text class="underLineBg assessor-info">{{item.name}}</text>
                    </view>
                    <block wx:if="{{ item.grade.display }}">
                        <view class="flex total"
                              wx:if="{{item.grade.display}}">
                            <view class="flex-main">
                                <block>
                                    <block>
                                        <view class="name">得分</view>
                                        <view class="lv">{{item.grade.value}}</view>
                                    </block>
                                </block>
                            </view>
                            <view class="flex-main" wx:if="{{item.level.display}}">
                                <block>
                                    <view class="name">等级</view>
                                    <view class="lv">{{ item.level.value }}</view>
                                </block>
                            </view>
                        </view>
                    </block>
                    <view class="content">
                        <rich-text  nodes="<p>{{item.conclusions[0].content||''}}</p>"></rich-text>
                    </view>
                    <!-- 雷达图 -->
                    <view class="chartImg radar-img radar-img-margin" wx:if="{{item.chartSetting.type == 3}}">
                        <hola-radar id="{{index}}" radarValue="{{ radarValue }}"
                                    radarIndicator="{{ radarIndicator }}" radarIndex="{{index}}"></hola-radar>
                    </view>
                    <view style="height:50rpx;"
                          wx:if="{{!item.lvDesc&&!item.showTotal&&!item.rankOrg&&!item.rankAll&&item.chartType==1}}"></view>
                    <!-- 维度 -->
                    <view class="list" wx:if="{{item.display}}">
                        <block  wx:for="{{item.subclasses}}" wx:key="unique"
                               wx:for-item="node" wx:for-index="i">
                            <view class="item">
                                <view class="title {{node.active}}" bindtap="activeItem" data-index="{{index}}"
                                      data-i="{{i}}">{{node.name}}：
                                    <block>
                                        <block>
                                            <text style="color:{{node.color}};">{{util.saveDouble(node.grade.value)}}分</text>
                                            <image src="./images/report@icon-arrow.png"></image>
                                        </block>
                                    </block>
                                </view>
                                <view class="contentMsg" wx:if="{{node.active}}">
                                    <block wx:for="{{node.lvTexts}}" wx:key="unique" wx:for-item="n" wx:for-index="j">
                                        <view class="title1">
                                            <text class="underLineBg">{{n.title}}：</text>
                                        </view>
                                        <rich-text class="msg" nodes="<p>{{n.content}}</p>"></rich-text>
                                    </block>
                                </view>
                            </view>
                        </block>
                    </view>
                    <view class="list" wx:if="{{item.show&&!item.showScore}}">
                        <block wx:for="{{item.child}}" wx:key="unique" wx:for-item="node" wx:for-index="i">
                            <view class="item">
                                <view class="title {{node.active}}" bindtap="activeItem" data-index="{{index}}"
                                      data-i="{{i}}">{{node.name}}：
                                    <text style="color:{{node.color}};">{{util.saveDouble(node.av10)}}分 {{node.lvName}}</text>
                                    <image src="./images/report@icon-arrow.png"></image>
                                </view>
                                <view class="contentMsg" wx:if="{{node.active}}">
                                    <block wx:for="{{node.lvTexts}}" wx:key="unique" wx:for-item="n" wx:for-index="j">
                                        <view class="title1">
                                            <text class="underLineBg">{{n.title}}：</text>
                                        </view>
                                        <rich-text class="msg" nodes="<p>{{n.content}}</p>"></rich-text>
                                    </block>
                                </view>
                            </view>
                        </block>
                    </view>
                </block>
            </block>
        </view>
        <view class="spaceView" wx:if="{{proposal.display}}" style="height:18rpx;"></view>
        <!-- 建议 -->
        <view class="box4" wx:if="{{proposal.display}}">
            <scroll-view class="tabs" scroll-x>
                <block wx:for="{{proposal.contents}}" wx:key="unique">
                    <view wx:if="{{item.display}}" class="item {{activeProposal==index?'active':''}}"
                          bindtap="changeProposal" data-i="{{index}}">{{item.title}}
                    </view>
                </block>
            </scroll-view>
            <view class="content">
                <view class="stars flex" wx:if="{{report.proposal[activeProposal].color}}">
                    <image src="./images/report@{{report.proposal[activeProposal].color>=1?'icon-star-fill':'icon-star-outline'}}.png"></image>
                    <image src="./images/report@{{report.proposal[activeProposal].color>=2?'icon-star-fill':'icon-star-outline'}}.png"></image>
                    <image src="./images/report@{{report.proposal[activeProposal].color>=3?'icon-star-fill':'icon-star-outline'}}.png"></image>
                    <image src="./images/report@{{report.proposal[activeProposal].color>=4?'icon-star-fill':'icon-star-outline'}}.png"></image>
                    <image src="./images/report@{{report.proposal[activeProposal].color>=5?'icon-star-fill':'icon-star-outline'}}.png"></image>
                </view>
                <rich-text class="msg" style="{{report.proposal[activeProposal].color?'':'padding-top:0;'}}"
                           nodes="<p>{{proposal.contents[activeProposal].annotation}}</p>"></rich-text>
            </view>
        </view>
        <!-- 分享报告按钮--普通团队成员无法使用该按钮 -->
        <view class="botbox flex" wx:if="{{ command !== 'close' }}">
            <button class="sharebtn" open-type="share" bindtap="" wx:if="{{teamRole!=1}}">
                <image src="./images/report@icon-share.png"></image>
                <text>分享报告</text>
            </button>
            <button wx:if="{{showPermitSettingDialog}}" class="sharebtn apply-button" bindtap="applyReportAudit">
                <image src="./images/report@icon-share.png"></image>
                <text>同意被测者查看报告</text>
            </button>
        </view>
        <!-- 免责声明 -->
        <view class="bottomMsg" wx:if="{{disclaimer}}">
            <rich-text nodes="{{disclaimer}}"></rich-text>
        </view>
        <!-- 底部固定 -->
        <view class="ownerMsg">{{reportCopyrightTxt}}</view>
        <!-- 弹窗信息 -->
        <view class="coverView" wx:if="{{showDlg}}" bindtap="hideDlg"></view>
        <view class="dlgView" wx:if="{{showDlg}}">
            <view wx:if="{{dlgName=='timeDlg'}}">
                <image src="./images/report@icon-sandglass.png"></image>
                <view class="msgTitle">作答时长：{{respondAnalysis.duration.standing}}分钟</view>
                <view class="msg">{{respondAnalysis.duration.annotation}}</view>
            </view>
            <view wx:if="{{dlgName=='noMatchDlg'}}">
                <image src="./images/report@icon-uniformity-unusual.png"></image>
                <view class="msgTitle">作答一致性：异常</view>
                <view class="msg">{{respondAnalysis.discordant.annotation}}</view>
            </view>
        </view>
    </view>
</block>
<hola-mask isShow="{{maskTrigger}}"></hola-mask>
<wxs src="../../utils/util.wxs" module="util"></wxs>
