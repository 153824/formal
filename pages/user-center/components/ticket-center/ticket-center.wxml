<view class="ticket">
    <scroll-view scroll-x="false" scroll-y class="ticket-scroll" bind:scrolltolower="goToNext">
        <block wx:if="{{isEmpty}}">
            <view class="empty-wrapper">
                <view class="empty-content">
                    <image class="empty" src="https://ihola.luoke101.com/icon%40ticket-empty.png"/>
                    <text class="empty-text">您还没有卡券哦</text>
                </view>
            </view>
        </block>
        <block wx:else>
            <view class="ticket-item" wx:for="{{tickets}}" wx:for-item="ticketItem" wx:for-index="ticketIndex" wx:key="unique">
                <text class="ticket-item__title">{{ticketItem.name}}</text>
                <view class="ticket-item__info">
                    <view class="ticket-item__info-left">
                        <block wx:if="{{ticketItem.expiredStatus === 'UNLIMITED'}}">
                            <text>· 长期可用</text>
                        </block>
                        <block wx:elif="{{ticketItem.expiredStatus === 'AVAILABLE'}}">
                            <text>· {{ticketItem.expiredTime}} 过期</text>
                        </block>
                        <block wx:elif="{{ticketItem.expiredStatus === 'EXPIRED'}}">
                            <text>· 已于 {{ticketItem.expiredTime}} 过期</text>
                        </block>
                        <view>
                            <text>· {{ticketItem.description}}</text>
                            <text wx:if="{{!util.isIncludes(showMoreMap, ticketIndex) && ticketItem.evaluations.length}}" class="see-it" data-index="{{ticketIndex}}" bind:tap="seeIt">查看</text>
                        </view>
                    </view>
                    <view class="ticket-item__info-right">
                        <text class="number">{{ticketItem.count}}</text>
                        <text class="text">张</text>
                    </view>
                </view>
                <image wx:if="{{ticketItem.expiredStatus === 'EXPIRED'}}" src="https://s.luoke101.com/icon-ticket-expire.png" class="expire"/>
                <view wx:if="{{util.isIncludes(showMoreMap, ticketIndex)}}" class="more-info">
                    <text wx:for="{{ticketItem.evaluations}}" wx:for-item="evaluationItem" wx:key="unique">《{{evaluationItem}}》</text>
                </view>
            </view>
        </block>
    </scroll-view>
</view>
<wxs src="../../../../utils/util.wxs" module="util"/>
