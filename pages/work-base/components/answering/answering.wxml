<!--test/index.wxml-->
<!-- 填写个人信息 -->
<view wx:if="{{isChangeQue}}" class="isChangeQue"></view>

<!-- 答题页面 -->
<view class="coverView" style="background-color:transparent;" wx:if="{{isChangeQue}}"></view>
<view class="container font">
    <view class="timebox sand-glass-wrapper" wx:if="{{sandGlass}}">剩余时间：
        <van-count-down time="{{sandGlass}}" bind:finish="submitAnswerForce"></van-count-down>
    </view>
    <form bindsubmit="formSubmit">
        <view class="paper {{phoneModel ? 'isiphoneXpaper':'notiphoneXpaper'}}"
              style="top:{{sandGlass?84:32}}rpx;">
            <swiper current="{{swiperCurrent1}}">
                <block wx:for="{{showQues}}" wx:for-index="quesindex" wx:for-item="quesitem" wx:key="unique">
                    <swiper-item wx:if="{{quesindex<(swiperCurrent+3)&&quesindex>(swiperCurrent-3)}}">
                        <scroll-view scroll-y="true" wx:if="{{quesitem}}">
                            <view class="question-number-group">
                                <view class="current-question">
                                    <text>{{swiperCurrent + 1 >= 10 ? swiperCurrent + 1 : '0' + (swiperCurrent + 1) }}
                                    </text>
                                    <text style="display: inline-block;width: 68rpx;height: 8rpx;background:rgba(53,62,232,1);border-radius:2px;"></text>
                                </view>
                                <text class="fragment-question">/</text>
                                <text class="total-question">{{quesAll.length}}</text>
                            </view>
                            <view class="paperhead">
                                <rich-text class="title" space="nbsp"
                                           nodes="<p>{{quesitem.maxChoose>1?multipleQuesHTML:''}}{{ quesitem.type == 3 ? percentQuesHTML:'' }}{{quesitem.stem}}</p>"></rich-text>
                            </view>
                            <view class="paperbody">
                                <view class="options">
                                    <block wx:for="{{quesitem.options}}" wx:for-index="i" wx:for-item="item"
                                           wx:key="unique">
                                        <view wx:if="{{quesitem.type!=3}}"
                                              class="selectItem {{answers[quesitem.id][i]!=null?'active':''}}"
                                              bindtap="change" data-index="{{quesindex}}" data-i="{{i}}">
                                            <label>
                                                <text class="langoption">{{optionsAry[i]}}:</text>
                                                <rich-text class="optiontext" nodes="<p>{{item}}</p>"></rich-text>
                                            </label>
                                        </view>
                                        <view wx:else
                                              class="notborderview selectItem {{answers[quesitem.id][i]!=null?'active':''}}"
                                              data-index="{{quesindex}}" data-i="{{i}}">
                                            <view>
                                                <text class="langoption">{{optionsAry[i]}}:</text>
                                                <rich-text class="optiontext" nodes="<p>{{item}}</p>"></rich-text>
                                            </view>
                                            <view>
                                                <input class="number_input" type="number"
                                                       value="{{answers[quesitem.id][i]!=null?answers[quesitem.id][i]:0}}"
                                                       bindconfirm="changeSlider" bindinput="changeSlider"
                                                       data-i="{{i}}" data-index="{{quesindex}}"/>
                                                <view class="number_slider_wrap">
                                                    <slider bindchanging="changeSlider" bindchange="changeSlider"
                                                            data-i="{{i}}" data-index="{{quesindex}}"
                                                            class="number_slider" min="0" max="{{quesitem.totalScore}}"
                                                            step="{{quesitem.step}}"
                                                            value="{{answers[quesitem.id][i]!=null?answers[quesitem.id][i]:0}}"
                                                            activeColor="#353EE8" block-size="10"
                                                            block-color="#353EE8"/>
                                                    <view class="number_slider_tip">
                                                        <view class="number_slider_tip_item_center">
                                                            <view class="number_slider_tip_item"
                                                                  wx:for="{{quesitem.stepArr}}"
                                                                  wx:for-item="slider_item" wx:key="unique"
                                                                  wx:for-index="idx">
                                                                <label class="number_slider_tip_number_label">{{slider_item}}</label>
                                                            </view>
                                                        </view>
                                                        <label class="number_slider_tip_number_label">{{quesitem.totalScore}}</label>
                                                    </view>
                                                </view>
                                            </view>
                                        </view>
                                    </block>
                                </view>
                            </view>
                            <view style="height:40rpx;"></view>
                        </scroll-view>
                    </swiper-item>
                </block>
            </swiper>
        </view>
        <view class="bottombtn {{phoneModel ? 'isiphoneX':''}}">
            <view class="btnprev" bindtap="prev" data-index="{{swiperCurrent}}"
                  style="display: flex;align-items: center;">
                <image src="../../images/answering@icon-scroll-left.png" style="width: 48rpx;height: 48rpx;"></image>
                上一题
            </view>
            <view class="btnnext" data-index="{{swiperCurrent}}" wx:if="{{(swiperCurrent + 1) != quesAll.length}}"
                  bindtap="next" style="display: flex;align-items: center;">
                下一题
                <image src="../../images/answering@icon-scroll-right.png" style="width: 48rpx;height: 48rpx;"></image>
            </view>
            <button class="btnnext btn-no-all-fill" bindtap="notFillAll" data-n="finish"
                    wx:if="{{(swiperCurrent + 1) == quesAll.length&&!isFillAll}}">提交
            </button>
            <button class="btnnext btnnextUp btn-is-all-fill"
                    wx:if="{{(swiperCurrent + 1) == quesAll.length&&isFillAll}}" form-type="submit">提交
            </button>
        </view>
    </form>
</view>
